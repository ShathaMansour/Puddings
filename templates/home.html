{% extends "index.html" %}
{% block title %}Home • Pudding’s{% endblock %}
{% set active = 'home' %}

{% block content %}

<section class="welcome-hero">
    <svg class="welcome-svg" viewBox="0 0 1200 200">
        <text x="50%" y="50%" dominant-baseline="middle" text-anchor="middle">
            Welcome to Pudding’s
        </text>
    </svg>
    <p class="welcome-subtitle">your cozy corner in Edinburgh</p>
</section>


<section class="slideshow">
    <div class="slideshow-container">
        <img src="{{ url_for('static', filename='img/slideshow5.png') }}" class="slide active">
        <img src="{{ url_for('static', filename='img/slideshow2.png') }}" class="slide">
        <img src="{{ url_for('static', filename='img/slideshow3.png') }}" class="slide">
        <img src="{{ url_for('static', filename='img/slideshow4.png') }}" class="slide">
    </div>
</section>

{% for category, items in featured.items() %}
<section class="category">

    <div class="cat-header">
        <h2>{{ category }}</h2>

        <a href="/menu#{{ category }}" class="browse-btn">
            Browse →
        </a>
    </div>

    <div class="items-row">

        {% for item in items %}
        <div class="item-card">

            {% if item.image %}
            <img class="item-img"
                 src="{{ url_for('static', filename=item.image) }}"
                 alt="{{ item.name }}">
            {% else %}
            <div class="no-img">No Image</div>
            {% endif %}

            <h3 class="item-name">{{ item.name }}</h3>

        </div>
        {% endfor %}

    </div>

</section>
{% endfor %}


<!-- Visit us section -->
<section class="visit-section">
    <h2>Visit Us</h2>
    <a href="/about#locate" class="location-btn">locate Pudding’s !</a>
</section>
<script>
document.addEventListener("DOMContentLoaded", () => {
    let slideIndex = 0;
    const slides = document.querySelectorAll(".slide");

    function nextSlide() {
        slides[slideIndex].classList.remove("active");
        slideIndex = (slideIndex + 1) % slides.length;
        slides[slideIndex].classList.add("active");
    }

    setInterval(nextSlide, 5000);

    /* Scroll animations */
    const revealOptions = {
        threshold: 0.2
    };

    const revealOnScroll = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.classList.add("visible");
            }
        });
    }, revealOptions);

    document.querySelectorAll(".category, .item-card").forEach(el => {
        revealOnScroll.observe(el);
    });
});
</script>

{% endblock %}
